<mat-card id="survey-container" fxLayout="column" #questionRef cdkDropList (cdkDropListDropped)="dropQuestion($event)">

	<mat-card-title>Kreator Ankiety</mat-card-title>

	<button id="publish-survey-button" mat-raised-button type="button" color="primary"
			(click)="onPublishSurveyButtonClick()">
		Opublikuj Ankietę
	</button>

	<mat-card id="no-questions-added-placeholder" class="mat-elevation-z4"
			  *ngIf="questions.length === 0">
		<button id="no-questions-added-placeholder-add-first-question" mat-stroked-button type="button"
				color="primary" (click)="onAddFirstQuestionButtonClick()">
			Dodaj pierwsze pytanie
		</button>
	</mat-card>

	
	<div cdkDrag *ngFor="let question of questions; let idx=index" class="question-container" 
			[ngClass]="{'condQuestion-list-container' : (question.type === this.QuestionTYPES.Condition)}">
		<app-creator-question-container 
			[question]="question"
			[isConditional]="false"
			[idx]="idx"
			(questionTypeChange)="onQuestionTypeChange($event)"
			(addQuestionBelowButtonClick)="onAddQuestionBelowButtonClick($event)"
			(addQuestionAboveButtonClick)="onAddQuestionAboveButtonClick($event)"
			(deleteQuestionButtonClick)="onDeleteQuestionButtonClick($event)"
		>
			<mat-icon slot="drag-handle" cdkDragHandle matTooltip="przemieść pytanie" [matTooltipShowDelay]="1000">
				drag_handle
			</mat-icon>
		</app-creator-question-container>

		<div cdkDropList (cdkDropListDropped)="dropConditionalQuestion($event, question)">
			<div cdkDrag
				*ngFor="let condQuestion of question.conditionalQuestions[question.selectedAnswerIndex]; 
				let condIdx=index"
				class="condQuestion-container">
				<app-creator-question-container
					[question]="condQuestion"
					[isConditional]="true"
					[idx]="condIdx"
					(questionTypeChange)="onConditionalQuestionTypeChange($event, idx)"
					(addQuestionBelowButtonClick)="onAddCondQuestionBelowButtonClick(idx, $event)"
					(addQuestionAboveButtonClick)="onAddCondQuestionAboveButtonClick(idx, $event)"
					(deleteQuestionButtonClick)="onDeleteCondoQuestionButtonClick(idx, $event)"
				>
					<mat-icon slot="drag-handle" cdkDragHandle matTooltip="przemieść pytanie" [matTooltipShowDelay]="1000">
						drag_handle
					</mat-icon>
				</app-creator-question-container>
			</div>
		</div>
	</div>
 	
<!-- 
	<div *ngFor="let question of questions; let idx=index" class="question-container">
		<div>
			<div>lapka</div>
			<div class="col-sm-3">
				<div class="panel panel-success">
						<div class="panel-heading">
								Favorite drinks
						</div>
						<div class="panel-body">
								<ul class="list-group">
										<li cdkDrag *ngFor="let item of listTwo; let i = index" class="list-group-item"
										>{{item}}</li>
								</ul>
						</div>
				</div>
			</div> 
		</div>
	</div>
 -->

	<div fxLayout="row">
		<button id="save-survey-button" mat-raised-button type="button" color="primary"
				(click)="onSaveSurveyButtonClicked()">
		Zapisz Zmiany
		</button>
		<button id="delete-survey-button" mat-raised-button type="button" color="warn" 
				(click)="onDeleteSurveyButtonClick()">
		Usuń Ankietę
		</button>
	</div>

</mat-card>

<!-- 
	<div *ngIf="question.conditionalQuestions[question.selectedAnswerIndex] !== undefined" class="survey-conditional-question-container">
			<section class="survey-conditional-question-container"
				*ngFor="let question2 of question.conditionalQuestions[question.selectedAnswerIndex]; let idx2=index"
				style="position: relative;" [attr.data-question-index]="idx2">
	
				<app-creator-survey-question [question]="question2"></app-creator-survey-question>
	
				<div class="survey-question-type" (click)="logSth()">
					<select [(ngModel)]="question2.type" (change)="onQuestionTypeChange(idx2)" disableUnderline>
						<option> {{QuestionTYPES.Text}} </option>
						<option> {{QuestionTYPES.OneOfN}} </option>
						<option> {{QuestionTYPES.XOfN}} </option>
						<option> {{QuestionTYPES.Condition}} </option>
					</select>
				</div>
	
				<mat-card class="survey-question-options">
					<mat-icon matTooltip="przemieść pytanie" [matTooltipShowDelay]="1000">
						drag_handle
					</mat-icon>
					<mat-icon (click)="onAddCondQuestionBelowButtonClick( idx, idx2 )" matTooltip="nowe pytanie poniżej" [matTooltipShowDelay]="500">
						arrow_drop_down
					</mat-icon>
					<mat-icon (click)="onAddCondQuestionAboveButtonClick( idx, idx2 )" 
							matTooltip="nowe pytanie powyżej" [matTooltipShowDelay]="500">
						arrow_drop_up
					</mat-icon>
					<mat-icon color="warn" 
							(click)="onDeleteQuestionButtonClick( idx2 )" matTooltip="usuń pytanie" [matTooltipShowDelay]="500">
						clear
					</mat-icon>
				</mat-card>
			</section>
			</div> -->
	<!--
	<span *ngFor="let question of questions; let idx=index" class="survey-question-container">
		<section class="survey-question-container"
			style="position: relative;" [attr.data-question-index]="idx" dnd-sortable [sortableIndex]="idx" >

			<app-creator-survey-question [question]="questions[idx]"></app-creator-survey-question>

			<div class="survey-question-type" (click)="logSth()">
				<select [(ngModel)]="question.type" (change)="onQuestionTypeChange(idx)" disableUnderline>
					<option> {{QuestionTYPES.Text}} </option>
					<option> {{QuestionTYPES.OneOfN}} </option>
					<option> {{QuestionTYPES.XOfN}} </option>
					<option> {{QuestionTYPES.Condition}} </option>
				</select>
			</div>

			<mat-card class="survey-question-options">
				<mat-icon dnd-sortable-handle matTooltip="przemieść pytanie" [matTooltipShowDelay]="1000">
					drag_handle
				</mat-icon>
				<mat-icon (click)="onAddQuestionBelowButtonClick( idx )" matTooltip="nowe pytanie poniżej" [matTooltipShowDelay]="500">
					arrow_drop_down
				</mat-icon>
				<mat-icon (click)="onAddQuestionAboveButtonClick( idx )" 
						matTooltip="nowe pytanie powyżej" [matTooltipShowDelay]="500">
					arrow_drop_up
				</mat-icon>
				<mat-icon color="warn" 
						(click)="onDeleteQuestionButtonClick( idx )" matTooltip="usuń pytanie" [matTooltipShowDelay]="500">
					clear
				</mat-icon>
			</mat-card>
		</section>

		<div *ngIf="question.conditionalQuestions[question.selectedAnswerIndex] !== undefined" class="survey-conditional-question-container">
		<section class="survey-conditional-question-container"
			*ngFor="let question2 of question.conditionalQuestions[question.selectedAnswerIndex]; let idx2=index"
			style="position: relative;" [attr.data-question-index]="idx2">

			<app-creator-survey-question [question]="question2"></app-creator-survey-question>

			<div class="survey-question-type" (click)="logSth()">
				<select [(ngModel)]="question2.type" (change)="onQuestionTypeChange(idx2)" disableUnderline>
					<option> {{QuestionTYPES.Text}} </option>
					<option> {{QuestionTYPES.OneOfN}} </option>
					<option> {{QuestionTYPES.XOfN}} </option>
					<option> {{QuestionTYPES.Condition}} </option>
				</select>
			</div>

			<mat-card class="survey-question-options">
				<mat-icon matTooltip="przemieść pytanie" [matTooltipShowDelay]="1000">
					drag_handle
				</mat-icon>
				<mat-icon (click)="onAddCondQuestionBelowButtonClick( idx, idx2 )" matTooltip="nowe pytanie poniżej" [matTooltipShowDelay]="500">
					arrow_drop_down
				</mat-icon>
				<mat-icon (click)="onAddCondQuestionAboveButtonClick( idx, idx2 )" 
						matTooltip="nowe pytanie powyżej" [matTooltipShowDelay]="500">
					arrow_drop_up
				</mat-icon>
				<mat-icon color="warn" 
						(click)="onDeleteQuestionButtonClick( idx2 )" matTooltip="usuń pytanie" [matTooltipShowDelay]="500">
					clear
				</mat-icon>
			</mat-card>
		</section>
		</div>
	</span>
	 -->
