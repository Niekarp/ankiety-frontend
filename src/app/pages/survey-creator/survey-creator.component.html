<mat-card id="survey-container" fxLayout="column" #questionRef dnd-sortable-container [sortableData]="questions">

	<mat-card-title>Kreator Ankiety</mat-card-title>

	<button id="publish-survey-button" mat-raised-button type="button" color="primary"
			(click)="onPublishSurveyButtonClick()">
	Opublikuj Ankietę
	</button>

	<mat-card id="no-questions-added-placeholder" class="mat-elevation-z4"
			  *ngIf="questions.length === 0">
		<button id="no-questions-added-placeholder-add-first-question" mat-stroked-button type="button"
				color="primary" (click)="onAddFirstQuestionButtonClick()">
			Dodaj pierwsze pytanie
		</button>
	</mat-card>

	<section class="survey-question-container" *ngFor="let question of questions; let idx=index"
			style="position: relative;" [attr.data-question-index]="idx" dnd-sortable [sortableIndex]="idx" >

		<app-creator-survey-question [question]="questions[idx]"></app-creator-survey-question>

		<div class="survey-question-type" (click)="logSth()">
			<select [(ngModel)]="question.type" (change)="onQuestionTypeChange(idx)" disableUnderline>
				<option> {{QuestionTYPES.Text}} </option>
				<option> {{QuestionTYPES.OneOfN}} </option>
				<option> {{QuestionTYPES.XOfN}} </option>
				<option> {{QuestionTYPES.Condition}} </option>
			</select>
		</div>

		<mat-card class="survey-question-options">
			<mat-icon dnd-sortable-handle matTooltip="przemieść pytanie" [matTooltipShowDelay]="1000">
				drag_handle
			</mat-icon>
			<mat-icon (click)="onAddQuestionBelowButtonClick( idx )" matTooltip="nowe pytanie poniżej" [matTooltipShowDelay]="500">
				arrow_drop_down
			</mat-icon>
			<mat-icon (click)="onAddQuestionAboveButtonClick( idx )" 
					matTooltip="nowe pytanie powyżej" [matTooltipShowDelay]="500">
				arrow_drop_up
			</mat-icon>
			<mat-icon color="warn" 
				  (click)="onDeleteQuestionButtonClick( idx )" matTooltip="usuń pytanie" [matTooltipShowDelay]="500">
				clear
			</mat-icon>
		</mat-card>
	</section>

	<div fxLayout="row">
		<button id="save-survey-button" mat-raised-button type="button" color="primary"
				(click)="onSaveSurveyButtonClicked()">
		Zapisz Zmiany
		</button>
		<button id="delete-survey-button" mat-raised-button type="button" color="warn" 
				(click)="onDeleteSurveyButtonClick()">
		Usuń Ankietę
		</button>
	</div>

</mat-card>
